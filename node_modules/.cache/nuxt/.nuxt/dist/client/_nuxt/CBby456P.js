import{g as M,h as A,a9 as S,aa as C,b as d,i as e,k as u,a1 as m,d as w,ab as L,j as i,ac as y,ad as N,ae as V,af as U,w as k,e as c,C as v,S as j,_ as B,a2 as D,o as p,ag as R}from"./iSluKep9.js";const I={class:"min-h-screen flex items-center justify-center bg-gray-50 py-12 px-4"},T={class:"max-w-md w-full bg-white rounded-lg shadow-md p-8"},K={key:0,class:"mb-4 p-3 bg-red-50 border border-red-200 rounded-lg"},$={class:"flex items-start gap-2"},q={class:"flex-1"},E={class:"text-sm text-red-800 font-medium"},P=["disabled"],H={class:"relative"},Y=["type","disabled"],z=["disabled"],F={class:"flex items-center"},G=["disabled"],J=["disabled"],O={key:0,class:"flex items-center justify-center gap-2"},Q={key:1},W={class:"text-center space-y-2 mt-4"},X={class:"text-xs text-gray-600"},Z={class:"text-xs text-gray-600"},ee={key:1,class:"mt-6 p-3 bg-gray-800 text-green-400 rounded text-xs font-mono"},ae=M({__name:"login",setup(se){A({title:"Login - Sistem Koperasi",meta:[{name:"description",content:"Login ke sistem koperasi"}]});const t=S(),b=C(),g=R(),o=v(!1),x=v(!1),l=v(""),a=j({email:"",password:"",rememberMe:!1}),_=async()=>{o.value=!0,l.value="";try{g.public.debugMode&&console.log("[Login] Attempting login with:",{email:a.email});const r=await t.login({email:a.email,password:a.password});r.success?(g.public.debugMode&&console.log("[Login] Success! User:",{role:t.userRole,isSuperadmin:t.isSuperadmin,isAdmin:t.isAdmin,isAnggota:t.isAnggota}),t.isSuperadmin?await b.push("/superadmin"):t.isAdmin?await b.push("/admin"):t.isAnggota?await b.push("/anggota"):await b.push("/")):l.value=r.message}catch(r){console.error("[Login] Unexpected error:",r),l.value="Terjadi kesalahan yang tidak terduga. Silakan coba lagi."}finally{o.value=!1}};return(r,s)=>{const f=B,h=D;return p(),d("div",I,[e("div",T,[s[13]||(s[13]=e("div",{class:"text-center mb-6"},[e("h1",{class:"text-2xl font-bold text-red-800 mb-2"},"Masuk ke Sistem Koperasi"),e("p",{class:"text-sm text-gray-600"},"Silakan masuk menggunakan akun Anda")],-1)),l.value?(p(),d("div",K,[e("div",$,[u(f,{name:"i-heroicons-exclamation-circle",class:"w-5 h-5 text-red-600 flex-shrink-0 mt-0.5"}),e("div",q,[e("p",E,m(l.value),1)]),e("button",{class:"text-red-400 hover:text-red-600 transition-colors",onClick:s[0]||(s[0]=n=>l.value="")},[u(f,{name:"i-heroicons-x-mark",class:"w-4 h-4"})])])])):w("",!0),e("form",{class:"space-y-4",onSubmit:L(_,["prevent"])},[e("div",null,[s[5]||(s[5]=e("label",{class:"block text-xs text-gray-700 mb-1"},[i(" Email "),e("span",{class:"text-red-500"},"*")],-1)),y(e("input",{"onUpdate:modelValue":s[1]||(s[1]=n=>a.email=n),type:"email",required:"",disabled:o.value,placeholder:"nama@email.com",class:"w-full px-3 py-2 border border-gray-300 rounded-md text-sm focus:outline-none focus:ring-1 focus:ring-red-500 focus:border-red-500 disabled:bg-gray-100 disabled:cursor-not-allowed transition-colors"},null,8,P),[[N,a.email]])]),e("div",null,[s[6]||(s[6]=e("label",{class:"block text-xs text-gray-700 mb-1"},[i(" Kata Sandi "),e("span",{class:"text-red-500"},"*")],-1)),e("div",H,[y(e("input",{"onUpdate:modelValue":s[2]||(s[2]=n=>a.password=n),type:x.value?"text":"password",required:"",disabled:o.value,placeholder:"Masukkan kata sandi",class:"w-full px-3 py-2 border border-gray-300 rounded-md text-sm focus:outline-none focus:ring-1 focus:ring-red-500 focus:border-red-500 disabled:bg-gray-100 disabled:cursor-not-allowed transition-colors"},null,8,Y),[[V,a.password]]),e("button",{type:"button",disabled:o.value,class:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-500 hover:text-gray-700 disabled:opacity-50 transition-colors",onClick:s[3]||(s[3]=n=>x.value=!x.value)},[u(f,{name:x.value?"i-heroicons-eye-slash":"i-heroicons-eye",class:"w-4 h-4"},null,8,["name"])],8,z)])]),e("div",F,[y(e("input",{id:"remember","onUpdate:modelValue":s[4]||(s[4]=n=>a.rememberMe=n),type:"checkbox",disabled:o.value,class:"w-4 h-4 text-red-600 border-gray-300 rounded focus:ring-red-500 disabled:opacity-50"},null,8,G),[[U,a.rememberMe]]),s[7]||(s[7]=e("label",{for:"remember",class:"ml-2 text-xs text-gray-700"}," Ingat saya ",-1))]),e("button",{type:"submit",disabled:o.value,class:"w-full px-6 py-2.5 bg-red-700 text-white text-sm font-semibold rounded-md hover:bg-red-800 disabled:opacity-50 disabled:cursor-not-allowed transition-colors"},[o.value?(p(),d("span",O,[...s[8]||(s[8]=[e("div",{class:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"},null,-1),i(" Memproses... ",-1)])])):(p(),d("span",Q,"Masuk"))],8,J),e("div",W,[e("p",X,[s[10]||(s[10]=i(" Belum punya akun? ",-1)),u(h,{to:"/pendaftaran/anggota",class:"text-red-700 hover:underline font-medium"},{default:k(()=>[...s[9]||(s[9]=[i(" Daftar Menjadi Anggota ",-1)])]),_:1})]),e("p",Z,[u(h,{to:"/auth/lupa-password",class:"text-red-700 hover:underline"},{default:k(()=>[...s[11]||(s[11]=[i(" Lupa kata sandi? ",-1)])]),_:1})])])],32),c(g).public.debugMode?(p(),d("div",ee,[s[12]||(s[12]=e("p",{class:"font-bold mb-2"},"ğŸ› Debug Mode",-1)),e("p",null,"API: "+m(c(g).public.apiBase),1),e("p",null,"Auth: "+m(c(t).isAuthenticated?"Yes":"No"),1),e("p",null,"Role: "+m(c(t).userRole||"N/A"),1),e("p",null,"Tenant: "+m(c(t).user?.tenantId||"N/A"),1)])):w("",!0)])])}}});export{ae as default};
