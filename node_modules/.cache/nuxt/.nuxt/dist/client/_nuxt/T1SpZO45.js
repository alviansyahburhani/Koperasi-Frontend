import{f as P,g as E,b as a,i as e,a1 as l,e as c,$ as b,a0 as _,k as f,d as y,r as C,C as S,o as n,c as v,w as k,j as w,_ as V,a2 as j}from"./CC_eTfNt.js";import{h as R,R as W}from"./B9keGLUy.js";import{u as N}from"./ChqTXyIJ.js";import{P as u,R as T}from"./BVV2khDz.js";const $=[{label:"Dashboard",icon:"i-lucide-layout-dashboard",to:"/superadmin"},{label:"Permohonan Pendaftaran",icon:"i-lucide-inbox",to:"/superadmin/permohonan",badge:5},{label:"Koperasi Aktif",icon:"i-lucide-building-2",to:"/superadmin/koperasi"},{label:"Monitoring",icon:"i-lucide-activity",to:"/superadmin/monitoring/activity-log"},{label:"Master Data",icon:"i-lucide-database",children:[{label:"Wilayah",to:"/superadmin/master-data/wilayah",icon:"i-lucide-map"},{label:"Email Template",to:"/superadmin/master-data/email-template",icon:"i-lucide-mail"}]}],B=[{label:"Dashboard",icon:"i-lucide-layout-dashboard",to:"/dashboard"},{label:"Anggota",icon:"i-lucide-users",to:"/dashboard/anggota",permission:u.VIEW_ANGGOTA},{label:"Simpanan",icon:"i-lucide-piggy-bank",to:"/dashboard/simpanan",permission:u.VIEW_SIMPANAN},{label:"Pinjaman",icon:"i-lucide-hand-coins",to:"/dashboard/pinjaman",permission:u.VIEW_PINJAMAN},{label:"Laporan",icon:"i-lucide-file-text",to:"/dashboard/laporan",permission:u.VIEW_LAPORAN,children:[{label:"Keuangan",to:"/dashboard/laporan/keuangan",icon:"i-lucide-wallet",permission:u.VIEW_LAPORAN},{label:"16 Buku Wajib",to:"/dashboard/laporan/16-buku",icon:"i-lucide-book-open",permission:u.VIEW_LAPORAN}]},{label:"Audit",icon:"i-lucide-shield-check",to:"/dashboard/audit",permission:u.VIEW_AUDIT},{label:"Pengaturan",icon:"i-lucide-settings",permission:u.MANAGE_SETTINGS,children:[{label:"Profil Koperasi",to:"/dashboard/pengaturan/profil-koperasi",icon:"i-lucide-building",permission:u.MANAGE_SETTINGS},{label:"User Management",to:"/dashboard/pengaturan/user-management",icon:"i-lucide-user-cog",permission:u.MANAGE_USERS}]}];function G(x){return x===T.SUPERADMIN?$:B}const K=()=>{const{role:x}=N(),i=r=>x.value?R(x.value,r):!1;return{can:i,canAny:r=>r.some(t=>i(t)),canAll:r=>r.every(t=>i(t))}},L=()=>{const{role:x}=N(),{can:i}=K(),g=r=>r.filter(t=>t.permission?typeof t.permission=="string"?i(t.permission):Array.isArray(t.permission)?t.permission.some(p=>i(p)):!1:!0).map(t=>{if(t.children&&t.children.length>0){const p=g(t.children);return p.length>0||t.to?{...t,children:p}:null}return t}).filter(t=>t!==null);return{menuItems:P(()=>{if(!x.value)return[];const r=G(x.value);return g(r)})}},U={class:"min-h-screen bg-gray-50"},D={class:"hidden lg:fixed lg:inset-y-0 lg:flex lg:w-64 lg:flex-col bg-white border-r border-gray-200"},O={class:"flex flex-col flex-grow pt-5 pb-4 overflow-y-auto"},z={class:"flex items-center flex-shrink-0 px-4 mb-5"},F={class:"ml-3"},J={class:"text-xs text-gray-500"},q={class:"flex-1 px-2 space-y-1"},H={key:0},Q={class:"px-3 py-2 text-xs font-semibold text-gray-500 uppercase tracking-wider"},X={class:"space-y-1"},Y={key:0,class:"ml-auto inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium bg-red-100 text-red-800"},Z={class:"flex-shrink-0 flex border-t border-gray-200 p-4"},ee={class:"flex items-center w-full"},te={class:"flex-shrink-0"},se={class:"h-10 w-10 rounded-full bg-gradient-to-br from-red-600 to-red-700 flex items-center justify-center text-white font-bold"},oe={class:"ml-3 flex-1"},ne={class:"text-sm font-medium text-gray-900 truncate"},le={class:"text-xs text-gray-500 truncate"},ae={key:1,class:"lg:hidden fixed inset-y-0 left-0 z-50 w-64 bg-white border-r border-gray-200"},re={class:"flex flex-col flex-grow pt-5 pb-4 overflow-y-auto"},ie={class:"flex items-center justify-between px-4 mb-5"},de={class:"flex items-center"},ce={class:"ml-3"},ue={class:"text-xs text-gray-500"},xe={class:"flex-1 px-2 space-y-1"},me={key:0},fe={class:"px-3 py-2 text-xs font-semibold text-gray-500 uppercase tracking-wider"},ge={class:"space-y-1"},pe={key:0,class:"ml-auto inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium bg-red-100 text-red-800"},be={class:"lg:pl-64 flex flex-col flex-1"},he={class:"sticky top-0 z-10 flex-shrink-0 flex h-16 bg-white shadow"},_e={class:"flex-1 px-4 flex justify-between items-center"},ye={class:"ml-4 flex items-center gap-3"},ve={class:"relative p-2 rounded-full text-gray-400 hover:text-gray-500 hover:bg-gray-100 transition-colors"},ke={class:"hidden sm:block"},we={class:"h-8 w-8 rounded-full bg-gradient-to-br from-red-600 to-red-700 flex items-center justify-center text-white text-sm font-bold"},Ae={class:"flex-1 overflow-y-auto"},Ne={class:"py-6"},Me={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8"},Ve=E({__name:"dashboard",setup(x){const{user:i,role:g,logout:A}=N(),{menuItems:r}=L(),t=S(!1),p=async()=>{confirm("Apakah Anda yakin ingin keluar?")&&await A()},M=P(()=>g.value?W[g.value]:null);return(I,o)=>{const m=V,h=j;return n(),a("div",U,[e("aside",D,[e("div",O,[e("div",z,[o[6]||(o[6]=e("div",{class:"w-10 h-10 bg-gradient-to-br from-red-600 to-red-700 rounded-lg flex items-center justify-center"},[e("span",{class:"text-white font-bold text-lg"},"KMP")],-1)),e("div",F,[o[5]||(o[5]=e("h1",{class:"text-lg font-bold text-gray-900"},"Koperasi",-1)),e("p",J,l(c(M)?.label),1)])]),e("nav",q,[(n(!0),a(b,null,_(c(r),s=>(n(),a(b,{key:s.label},[s.children&&s.children.length>0?(n(),a("div",H,[e("div",Q,l(s.label),1),e("div",X,[(n(!0),a(b,null,_(s.children,d=>(n(),v(h,{key:d.to,to:d.to||"#",class:"group flex items-center px-3 py-2 text-sm font-medium rounded-md text-gray-700 hover:bg-gray-100 hover:text-red-600 transition-colors","active-class":"bg-red-50 text-red-600"},{default:k(()=>[f(m,{name:d.icon,class:"mr-3 flex-shrink-0 h-5 w-5"},null,8,["name"]),w(" "+l(d.label),1)]),_:2},1032,["to"]))),128))])])):(n(),v(h,{key:1,to:s.to||"#",class:"group flex items-center px-3 py-2 text-sm font-medium rounded-md text-gray-700 hover:bg-gray-100 hover:text-red-600 transition-colors","active-class":"bg-red-50 text-red-600"},{default:k(()=>[f(m,{name:s.icon,class:"mr-3 flex-shrink-0 h-5 w-5"},null,8,["name"]),w(" "+l(s.label)+" ",1),s.badge?(n(),a("span",Y,l(s.badge),1)):y("",!0)]),_:2},1032,["to"]))],64))),128))]),e("div",Z,[e("div",ee,[e("div",te,[e("div",se,l(c(i)?.name?.charAt(0)||"U"),1)]),e("div",oe,[e("p",ne,l(c(i)?.name),1),e("p",le,l(c(i)?.email),1)]),e("button",{class:"ml-2 text-gray-400 hover:text-red-600 transition-colors",onClick:p},[f(m,{name:"i-lucide-log-out",class:"h-5 w-5"})])])])])]),c(t)?(n(),a("div",{key:0,class:"lg:hidden fixed inset-0 z-40 bg-gray-900 bg-opacity-75",onClick:o[0]||(o[0]=s=>t.value=!1)})):y("",!0),c(t)?(n(),a("aside",ae,[e("div",re,[e("div",ie,[e("div",de,[o[8]||(o[8]=e("div",{class:"w-10 h-10 bg-gradient-to-br from-red-600 to-red-700 rounded-lg flex items-center justify-center"},[e("span",{class:"text-white font-bold text-lg"},"KMP")],-1)),e("div",ce,[o[7]||(o[7]=e("h1",{class:"text-lg font-bold text-gray-900"},"Koperasi",-1)),e("p",ue,l(c(M)?.label),1)])]),e("button",{class:"text-gray-500 hover:text-gray-700",onClick:o[1]||(o[1]=s=>t.value=!1)},[f(m,{name:"i-lucide-x",class:"w-6 h-6"})])]),e("nav",xe,[(n(!0),a(b,null,_(c(r),s=>(n(),a(b,{key:s.label},[s.children&&s.children.length>0?(n(),a("div",me,[e("div",fe,l(s.label),1),e("div",ge,[(n(!0),a(b,null,_(s.children,d=>(n(),v(h,{key:d.to,to:d.to||"#",class:"group flex items-center px-3 py-2 text-sm font-medium rounded-md text-gray-700 hover:bg-gray-100 hover:text-red-600 transition-colors","active-class":"bg-red-50 text-red-600",onClick:o[2]||(o[2]=Pe=>t.value=!1)},{default:k(()=>[f(m,{name:d.icon,class:"mr-3 flex-shrink-0 h-5 w-5"},null,8,["name"]),w(" "+l(d.label),1)]),_:2},1032,["to"]))),128))])])):(n(),v(h,{key:1,to:s.to||"#",class:"group flex items-center px-3 py-2 text-sm font-medium rounded-md text-gray-700 hover:bg-gray-100 hover:text-red-600 transition-colors","active-class":"bg-red-50 text-red-600",onClick:o[3]||(o[3]=d=>t.value=!1)},{default:k(()=>[f(m,{name:s.icon,class:"mr-3 flex-shrink-0 h-5 w-5"},null,8,["name"]),w(" "+l(s.label)+" ",1),s.badge?(n(),a("span",pe,l(s.badge),1)):y("",!0)]),_:2},1032,["to"]))],64))),128))])])])):y("",!0),e("div",be,[e("div",he,[e("button",{class:"px-4 border-r border-gray-200 text-gray-500 focus:outline-none lg:hidden",onClick:o[4]||(o[4]=s=>t.value=!0)},[f(m,{name:"i-lucide-menu",class:"h-6 w-6"})]),e("div",_e,[o[10]||(o[10]=e("div",{class:"flex-1"},null,-1)),e("div",ye,[e("button",ve,[f(m,{name:"i-lucide-bell",class:"h-6 w-6"}),o[9]||(o[9]=e("span",{class:"absolute top-1 right-1 block h-2 w-2 rounded-full bg-red-400 ring-2 ring-white"},null,-1))]),e("div",ke,[e("div",we,l(c(i)?.name?.charAt(0)||"U"),1)])])])]),e("main",Ae,[e("div",Ne,[e("div",Me,[C(I.$slots,"default")])])])])])}}});export{Ve as default};
