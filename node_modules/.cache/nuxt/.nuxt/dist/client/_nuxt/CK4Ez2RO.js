import{g as V,ai as j,aa as A,C as p,B as L,b as n,i as s,k as a,ab as N,j as o,ac as h,ae as v,R as T,e as x,n as f,a1 as k,d as i,w as U,S as $,_ as q,a2 as D,o as r,f as _}from"./CC_eTfNt.js";const R={class:"min-h-screen flex items-center justify-center bg-gray-50 py-12 px-4"},z={class:"max-w-md w-full bg-white rounded-lg shadow-md p-8"},P={key:0},Z={class:"text-center mb-6"},E={class:"mx-auto w-16 h-16 bg-red-100 rounded-full flex items-center justify-center mb-4"},I={class:"relative"},F=["type"],G={key:0,class:"mt-2"},H={class:"flex items-center gap-2"},J={class:"flex-1 h-1.5 bg-gray-200 rounded-full overflow-hidden"},O={class:"relative"},Q=["type"],W={key:0,class:"text-xs text-red-600 mt-1"},X={key:1,class:"text-xs text-green-600 mt-1"},Y={class:"bg-gray-50 border border-gray-200 rounded-md p-3"},ee={class:"text-xs text-gray-600 space-y-1"},se={class:"flex items-center gap-1"},te={class:"flex items-center gap-1"},ae={class:"flex items-center gap-1"},le=["disabled"],oe={key:1,class:"text-center"},ne={class:"mx-auto w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mb-4"},re={key:2,class:"text-center"},ie={class:"mx-auto w-16 h-16 bg-red-100 rounded-full flex items-center justify-center mb-4"},ce=V({__name:"reset-password",setup(de){const C=j(),K=A(),S=p(C.query.token||""),d=p(!1),g=p(!1),b=p(!1),u=p("form"),t=$({password:"",passwordConfirm:""}),w=_(()=>{const c=t.password;return c.length===0?{label:"",color:"",width:"0%"}:c.length<6?{label:"Lemah",color:"bg-red-500",width:"25%"}:c.length<8?{label:"Sedang",color:"bg-yellow-500",width:"50%"}:c.length<12?{label:"Kuat",color:"bg-green-500",width:"75%"}:{label:"Sangat Kuat",color:"bg-green-600",width:"100%"}}),y=_(()=>t.password.length>=8&&t.password===t.passwordConfirm);L(async()=>{if(!S.value){u.value="invalid";return}});const B=async()=>{if(y.value){d.value=!0;try{setTimeout(()=>{d.value=!1,u.value="success",setTimeout(()=>{K.push("/login")},3e3)},1500)}catch{d.value=!1}}};return(c,e)=>{const l=q,M=D;return r(),n("div",R,[s("div",z,[u.value==="form"?(r(),n("div",P,[s("div",Z,[s("div",E,[a(l,{name:"i-lucide-key-round",class:"w-8 h-8 text-red-600"})]),e[4]||(e[4]=s("h1",{class:"text-2xl font-bold text-gray-900 mb-2"},"Buat Kata Sandi Baru",-1)),e[5]||(e[5]=s("p",{class:"text-sm text-gray-600"}," Kata sandi baru harus berbeda dari kata sandi sebelumnya. ",-1))]),s("form",{class:"space-y-4",onSubmit:N(B,["prevent"])},[s("div",null,[e[6]||(e[6]=s("label",{class:"block text-xs font-medium text-gray-700 mb-1"},[o(" Kata Sandi Baru "),s("span",{class:"text-red-500"},"*")],-1)),s("div",I,[h(s("input",{"onUpdate:modelValue":e[0]||(e[0]=m=>t.password=m),type:g.value?"text":"password",required:"",placeholder:"Minimal 8 karakter",class:"w-full px-3 py-2.5 border border-gray-300 rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-red-500 focus:border-red-500"},null,8,F),[[v,t.password]]),s("button",{type:"button",class:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-500 hover:text-gray-700",onClick:e[1]||(e[1]=m=>g.value=!g.value)},[a(l,{name:g.value?"i-lucide-eye-off":"i-lucide-eye",class:"w-4 h-4"},null,8,["name"])])]),t.password?(r(),n("div",G,[s("div",H,[s("div",J,[s("div",{class:f(["h-full transition-all duration-300",x(w).color]),style:T({width:x(w).width})},null,6)]),s("span",{class:f(["text-xs font-medium",`text-${x(w).color.replace("bg-","")}`])},k(x(w).label),3)])])):i("",!0)]),s("div",null,[e[9]||(e[9]=s("label",{class:"block text-xs font-medium text-gray-700 mb-1"},[o(" Konfirmasi Kata Sandi "),s("span",{class:"text-red-500"},"*")],-1)),s("div",O,[h(s("input",{"onUpdate:modelValue":e[2]||(e[2]=m=>t.passwordConfirm=m),type:b.value?"text":"password",required:"",placeholder:"Ketik ulang kata sandi",class:"w-full px-3 py-2.5 border border-gray-300 rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-red-500 focus:border-red-500"},null,8,Q),[[v,t.passwordConfirm]]),s("button",{type:"button",class:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-500 hover:text-gray-700",onClick:e[3]||(e[3]=m=>b.value=!b.value)},[a(l,{name:b.value?"i-lucide-eye-off":"i-lucide-eye",class:"w-4 h-4"},null,8,["name"])])]),t.passwordConfirm&&t.password!==t.passwordConfirm?(r(),n("p",W,[a(l,{name:"i-lucide-x-circle",class:"w-3 h-3 inline"}),e[7]||(e[7]=o(" Kata sandi tidak cocok ",-1))])):i("",!0),t.passwordConfirm&&t.password===t.passwordConfirm?(r(),n("p",X,[a(l,{name:"i-lucide-check-circle",class:"w-3 h-3 inline"}),e[8]||(e[8]=o(" Kata sandi cocok ",-1))])):i("",!0)]),s("div",Y,[e[13]||(e[13]=s("p",{class:"text-xs font-medium text-gray-700 mb-2"},"Kata sandi harus:",-1)),s("ul",ee,[s("li",se,[a(l,{name:t.password.length>=8?"i-lucide-check":"i-lucide-minus",class:f([t.password.length>=8?"text-green-600":"text-gray-400","w-3 h-3"])},null,8,["name","class"]),e[10]||(e[10]=o(" Minimal 8 karakter ",-1))]),s("li",te,[a(l,{name:/[A-Z]/.test(t.password)?"i-lucide-check":"i-lucide-minus",class:f([/[A-Z]/.test(t.password)?"text-green-600":"text-gray-400","w-3 h-3"])},null,8,["name","class"]),e[11]||(e[11]=o(" Mengandung huruf besar ",-1))]),s("li",ae,[a(l,{name:/[0-9]/.test(t.password)?"i-lucide-check":"i-lucide-minus",class:f([/[0-9]/.test(t.password)?"text-green-600":"text-gray-400","w-3 h-3"])},null,8,["name","class"]),e[12]||(e[12]=o(" Mengandung angka ",-1))])])]),s("button",{type:"submit",disabled:d.value||!x(y),class:"w-full px-6 py-2.5 bg-red-700 text-white text-sm font-semibold rounded-md hover:bg-red-800 disabled:opacity-50 disabled:cursor-not-allowed transition-colors"},k(d.value?"Memproses...":"Atur Ulang Kata Sandi"),9,le)],32)])):i("",!0),u.value==="success"?(r(),n("div",oe,[s("div",ne,[a(l,{name:"i-lucide-check-circle-2",class:"w-8 h-8 text-green-600"})]),e[14]||(e[14]=s("h1",{class:"text-2xl font-bold text-gray-900 mb-2"},"Berhasil!",-1)),e[15]||(e[15]=s("p",{class:"text-sm text-gray-600 mb-6"}," Kata sandi Anda telah berhasil diatur ulang. Anda akan dialihkan ke halaman login... ",-1)),e[16]||(e[16]=s("div",{class:"flex justify-center"},[s("div",{class:"animate-spin rounded-full h-8 w-8 border-b-2 border-red-600"})],-1))])):i("",!0),u.value==="invalid"?(r(),n("div",re,[s("div",ie,[a(l,{name:"i-lucide-alert-circle",class:"w-8 h-8 text-red-600"})]),e[18]||(e[18]=s("h1",{class:"text-2xl font-bold text-gray-900 mb-2"},"Link Tidak Valid",-1)),e[19]||(e[19]=s("p",{class:"text-sm text-gray-600 mb-6"}," Link reset password sudah kadaluarsa atau tidak valid. Silakan minta link baru. ",-1)),a(M,{to:"/lupa-password",class:"inline-block px-6 py-2.5 bg-red-700 text-white text-sm font-semibold rounded-md hover:bg-red-800 transition-colors"},{default:U(()=>[...e[17]||(e[17]=[o(" Minta Link Baru ",-1)])]),_:1})])):i("",!0)])])}}});export{ce as default};
