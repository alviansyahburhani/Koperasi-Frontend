{"file":"useAuth-FzT0Z3nn.js","mappings":";;;AAGO,MAAM,UAAU,MAAM;AAC3B,QAAM,OAAO,SAAsB,aAAa,MAAM;AAQpD,WAAO;AAAA,EACT,CAAC;AAED,QAAM,kBAAkB,SAAS,MAAM,CAAC,CAAC,KAAK,KAAK;AACnD,QAAM,OAAO,SAAS,MAAM,KAAK,OAAO,QAAQ,IAAI;AAEpD,QAAM,QAAQ,OAAO,gBAAyE;AAE5F,QAAI,WAAwB;AAG5B,QAAI,YAAY,UAAU,2BAA2B;AACnD,iBAAW;AAAA,QACT,IAAI;AAAA;AAAA,QACJ,MAAM;AAAA,QACN,OAAO,YAAY;AAAA,QACnB,MAAM,KAAK;AAAA,MAAA;AAAA,IAEf,WAAW,YAAY,UAAU,sBAAsB;AACrD,iBAAW;AAAA,QACT,IAAI;AAAA;AAAA,QACJ,MAAM;AAAA,QACN,OAAO,YAAY;AAAA,QACnB,MAAM,KAAK;AAAA,QACX,eAAe;AAAA;AAAA,MAAA;AAAA,IAEnB,WAAW,YAAY,UAAU,0BAA0B;AACzD,iBAAW;AAAA,QACT,IAAI;AAAA,QACJ,MAAM;AAAA,QACN,OAAO,YAAY;AAAA,QACnB,MAAM,KAAK;AAAA,QACX,eAAe;AAAA,MAAA;AAAA,IAEnB,WAAW,YAAY,UAAU,2BAA2B;AAC1D,iBAAW;AAAA,QACT,IAAI;AAAA;AAAA,QACJ,MAAM;AAAA,QACN,OAAO,YAAY;AAAA,QACnB,MAAM,KAAK;AAAA,QACX,eAAe;AAAA;AAAA,MAAA;AAAA,IAEnB,WAAW,YAAY,UAAU,yBAAyB;AACxD,iBAAW;AAAA,QACT,IAAI;AAAA;AAAA,QACJ,MAAM;AAAA,QACN,OAAO,YAAY;AAAA,QACnB,MAAM,KAAK;AAAA,QACX,eAAe;AAAA;AAAA,MAAA;AAAA,IAEnB,WAAW,YAAY,UAAU,wBAAwB;AACvD,iBAAW;AAAA,QACT,IAAI;AAAA;AAAA,QACJ,MAAM;AAAA,QACN,OAAO,YAAY;AAAA,QACnB,MAAM,KAAK;AAAA,QACX,eAAe;AAAA;AAAA,MAAA;AAAA,IAEnB,OAAO;AACL,YAAM,IAAI,MAAM,2BAA2B;AAAA,IAC7C;AAEA,SAAK,QAAQ;AAOb,WAAO,EAAE,SAAS,MAAM,MAAM,SAAA;AAAA,EAChC;AAEA,QAAM,SAAS,YAAY;AACzB,SAAK,QAAQ;AAMb,UAAM,WAAW,aAAa;AAAA,EAChC;AAEA,SAAO;AAAA,IACL,MAAM,SAAS,MAAM,KAAK,KAAK;AAAA,IAC/B;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,EAAA;AAEJ;","names":[],"sources":["../../../../../../../app/composables/core/useAuth.ts"],"sourcesContent":["import type { User } from '~/types'\nimport { Role } from '~/types'\n\nexport const useAuth = () => {\n  const user = useState<User | null>('auth-user', () => {\n    // Check if we're in browser and have stored session\n    if (import.meta.client) {\n      const stored = localStorage.getItem('user')\n      if (stored) {\n        return JSON.parse(stored)\n      }\n    }\n    return null\n  })\n\n  const isAuthenticated = computed(() => !!user.value)\n  const role = computed(() => user.value?.role ?? null)\n\n  const login = async (credentials: { email: string; password: string; remember?: boolean }) => {\n    // TODO: Implement real API call\n    let userData: User | null = null\n\n    // Mock login logic\n    if (credentials.email === 'superadmin@koperasi.com') {\n      userData = {\n        id: '1', // ✅ String instead of number\n        name: 'Super Admin',\n        email: credentials.email,\n        role: Role.SUPERADMIN,\n      }\n    } else if (credentials.email === 'ketua@koperasi.com') {\n      userData = {\n        id: '2', // ✅ String\n        name: 'Ketua Koperasi',\n        email: credentials.email,\n        role: Role.KETUA,\n        cooperativeId: '1', // ✅ String\n      }\n    } else if (credentials.email === 'bendahara@koperasi.com') {\n      userData = {\n        id: '3',\n        name: 'Bendahara',\n        email: credentials.email,\n        role: Role.BENDAHARA,\n        cooperativeId: '1',\n      }\n    } else if (credentials.email === 'sekretaris@koperasi.com') {\n      userData = {\n        id: '4', // ✅ String\n        name: 'Sekretaris',\n        email: credentials.email,\n        role: Role.SEKRETARIS,\n        cooperativeId: '1', // ✅ String\n      }\n    } else if (credentials.email === 'pengawas@koperasi.com') {\n      userData = {\n        id: '5', // ✅ String\n        name: 'Pengawas',\n        email: credentials.email,\n        role: Role.PENGAWAS,\n        cooperativeId: '1', // ✅ String\n      }\n    } else if (credentials.email === 'anggota@koperasi.com') {\n      userData = {\n        id: '6', // ✅ String\n        name: 'Anggota Koperasi',\n        email: credentials.email,\n        role: Role.ANGGOTA,\n        cooperativeId: '1', // ✅ String\n      }\n    } else {\n      throw new Error('Email atau password salah')\n    }\n\n    user.value = userData\n\n    // ✅ Store in localStorage if remember me\n    if (import.meta.client && credentials.remember) {\n      localStorage.setItem('user', JSON.stringify(userData))\n    }\n\n    return { success: true, user: userData }\n  }\n\n  const logout = async () => {\n    user.value = null\n\n    if (import.meta.client) {\n      localStorage.removeItem('user')\n    }\n\n    await navigateTo('/auth/login')\n  }\n\n  return {\n    user: computed(() => user.value),\n    isAuthenticated,\n    role,\n    login,\n    logout,\n  }\n}\n"],"version":3}