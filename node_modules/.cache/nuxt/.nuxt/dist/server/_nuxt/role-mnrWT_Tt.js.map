{"version":3,"file":"role-mnrWT_Tt.js","sources":["../../../../../../../app/middleware/role.ts"],"sourcesContent":["import { Role } from '~/types'\nimport { RoleConfig } from '~/utils/roles'\n\nexport default defineNuxtRouteMiddleware((to) => {\n  const user = useState<unknown>('auth-user')\n  const role = user.value?.role as Role | null\n\n  if (!role) {\n    return navigateTo('/auth/login')\n  }\n\n  // Define route role requirements\n  const routeRoles: Record<string, Role[]> = {\n    '/superadmin': [Role.SUPERADMIN],\n    '/dashboard': [Role.KETUA, Role.SEKRETARIS, Role.BENDAHARA, Role.PENGAWAS, Role.ANGGOTA],\n  }\n\n  // Check if route starts with unknown protected path\n  for (const [path, allowedRoles] of Object.entries(routeRoles)) {\n    if (to.path.startsWith(path)) {\n      if (!allowedRoles.includes(role)) {\n        const config = RoleConfig[role]\n        return navigateTo(config?.dashboardRoute || '/')\n      }\n    }\n  }\n})\n"],"names":["role"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;AAGA,MAAA,OAAe,0BAA0B,CAAC,OAAO;AAC/C,QAAM,OAAO,SAAkB,WAAW;AAC1C,QAAMA,QAAO,KAAK,OAAO;AAEzB,MAAI,CAACA,OAAM;AACT,WAAO,WAAW,aAAa;AAAA,EACjC;AAGA,QAAM,aAAqC;AAAA,IACzC,eAAe,CAAC,KAAK,UAAU;AAAA,IAC/B,cAAc,CAAC,KAAK,OAAO,KAAK,YAAY,KAAK,WAAW,KAAK,UAAU,KAAK,OAAO;AAAA,EAAA;AAIzF,aAAW,CAAC,MAAM,YAAY,KAAK,OAAO,QAAQ,UAAU,GAAG;AAC7D,QAAI,GAAG,KAAK,WAAW,IAAI,GAAG;AAC5B,UAAI,CAAC,aAAa,SAASA,KAAI,GAAG;AAChC,cAAM,SAAS,WAAWA,KAAI;AAC9B,eAAO,WAAW,QAAQ,kBAAkB,GAAG;AAAA,MACjD;AAAA,IACF;AAAA,EACF;AACF,CAAC;"}